<div class="root border-left">
    <div class="board-bar">
      <mat-card-title>Заявки</mat-card-title>
      <button mat-flat-button color="primary" id="add-task" (click)="openDialog()" >
        <span class="material-symbols-outlined">
          add
        </span>
        Добавить сделку
      </button>
      <div class="input-group">
          <mat-form-field class="example-form-field">
            <input matInput type="text" [(ngModel)]="inputSearchTaskByName">
            <button  matSuffix mat-icon-button aria-label="Clear" (click)="inputSearchTaskByName=''">
              <mat-icon>close</mat-icon>
            </button>
          </mat-form-field>
      </div>
      <button mat-button mat-stroked-button aria-label="search">
        <mat-icon>search</mat-icon>
      </button>
    </div>
        <main>
          <ng-container *ngFor="let status of statuses">
            <div *ngIf="getSortedTasksFromMap((tasksGroupedByStatus$ | async), status.id) 
                        | filterByTaskName:inputSearchTaskByName as tasks"
                 class="status-column"
                 cdkDropList
                 [id]="'status-' + status.id"
                 [cdkDropListData]="tasks"
                 [cdkDropListConnectedTo]="getConnectedStatuses(status.id)"
                 (cdkDropListDropped)="drop($event)">
                  <div class="status" color="primary">
                    {{status.name.toUpperCase()}}
                    <span class="badge" color="secondary"> {{ tasks.length }} </span>
                  </div>
                  <div class="money">{{getSumOfMoneyFromAllTasks(tasks)}} ₽</div>
                  <button mat-stroked-button  (click)="openDialog(status.id)"
                    (mouseenter)="onMouseEnter(thenBlock)" 
                    (mouseleave)="onMouseLeave(thenBlock)">
                    <div #thenBlock>
                      <span  class="material-symbols-outlined">
                        add
                      </span>
                    </div>
                  </button>
                  <app-card 
                            *ngFor="let task of tasks"
                            [task]="task"
                            cdkDrag
                            class="tasks">
                  </app-card>             
            </div>
          </ng-container>
        </main>
</div>

